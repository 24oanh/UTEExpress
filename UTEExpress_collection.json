{
  "info": {
    "name": "UTEExpress API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Login Warehouse",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Login successful\", function () {",
                  "    pm.response.to.have.status(200);",
                  "    var cookies = pm.cookies.get('JSESSIONID');",
                  "    if (cookies) {",
                  "        pm.environment.set('JSESSIONID', cookies);",
                  "    }",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "username",
                  "value": "{{warehouse_username}}"
                },
                {
                  "key": "password",
                  "value": "{{warehouse_password}}"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/login",
              "host": ["{{base_url}}"],
              "path": ["login"]
            }
          }
        },
        {
          "name": "Login Shipper",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Login successful\", function () {",
                  "    pm.response.to.have.status(200);",
                  "    var cookies = pm.cookies.get('JSESSIONID');",
                  "    if (cookies) {",
                  "        pm.environment.set('JSESSIONID', cookies);",
                  "    }",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "username",
                  "value": "{{shipper_username}}"
                },
                {
                  "key": "password",
                  "value": "{{shipper_password}}"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/login",
              "host": ["{{base_url}}"],
              "path": ["login"]
            }
          }
        }
      ]
    },
    {
      "name": "Warehouse - Orders",
      "item": [
        {
          "name": "Create Order",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Order created\", function () {",
                  "    pm.response.to.have.status(302);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              },
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "orderCode",
                  "value": "ORD{{$timestamp}}"
                },
                {
                  "key": "senderName",
                  "value": "Nguyen Van A"
                },
                {
                  "key": "senderPhone",
                  "value": "0901234567"
                },
                {
                  "key": "senderAddress",
                  "value": "123 Street, Hanoi"
                },
                {
                  "key": "recipientName",
                  "value": "Tran Van B"
                },
                {
                  "key": "recipientPhone",
                  "value": "0907654321"
                },
                {
                  "key": "recipientAddress",
                  "value": "456 Street, HCMC"
                },
                {
                  "key": "shipmentFee",
                  "value": "100000"
                },
                {
                  "key": "notes",
                  "value": "Fragile items"
                },
                {
                  "key": "destinationWarehouseId",
                  "value": "{{destination_warehouse_id}}"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/warehouse/orders/create",
              "host": ["{{base_url}}"],
              "path": ["warehouse", "orders", "create"]
            }
          }
        },
        {
          "name": "Get Order Detail",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/warehouse/orders/{{order_id}}",
              "host": ["{{base_url}}"],
              "path": ["warehouse", "orders", "{{order_id}}"]
            }
          }
        },
        {
          "name": "Assign Shipper to Order",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              },
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "shipperId",
                  "value": "{{shipper_id}}"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/warehouse/orders/{{order_id}}/assign-shipper",
              "host": ["{{base_url}}"],
              "path": ["warehouse", "orders", "{{order_id}}", "assign-shipper"]
            }
          }
        },
        {
          "name": "List Orders",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/warehouse/orders",
              "host": ["{{base_url}}"],
              "path": ["warehouse", "orders"]
            }
          }
        }
      ]
    },
    {
      "name": "Shipper - Dashboard",
      "item": [
        {
          "name": "Get Dashboard",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/shipper/dashboard",
              "host": ["{{base_url}}"],
              "path": ["shipper", "dashboard"]
            }
          }
        },
        {
          "name": "List Orders",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/shipper/orders",
              "host": ["{{base_url}}"],
              "path": ["shipper", "orders"]
            }
          }
        },
        {
          "name": "Get Order Detail",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/shipper/orders/{{order_id}}",
              "host": ["{{base_url}}"],
              "path": ["shipper", "orders", "{{order_id}}"]
            }
          }
        },
        {
          "name": "List Shipments",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/shipper/shipments",
              "host": ["{{base_url}}"],
              "path": ["shipper", "shipments"]
            }
          }
        },
        {
          "name": "Get Shipment Detail",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/shipper/shipments/{{shipment_id}}",
              "host": ["{{base_url}}"],
              "path": ["shipper", "shipments", "{{shipment_id}}"]
            }
          }
        }
      ]
    },
    {
      "name": "Shipper - Actions",
      "item": [
        {
          "name": "Start Shipment (Bắt đầu)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              },
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "url": {
              "raw": "{{base_url}}/shipper/shipments/{{shipment_id}}/start",
              "host": ["{{base_url}}"],
              "path": ["shipper", "shipments", "{{shipment_id}}", "start"]
            }
          }
        },
        {
          "name": "Complete Shipment (Giao hàng)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "proofImage",
                  "type": "file",
                  "src": ""
                },
                {
                  "key": "notes",
                  "value": "Delivered successfully",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/shipper/shipments/{{shipment_id}}/complete",
              "host": ["{{base_url}}"],
              "path": ["shipper", "shipments", "{{shipment_id}}", "complete"]
            }
          }
        },
        {
          "name": "Fail Shipment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              },
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "notes",
                  "value": "Customer not available"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/shipper/shipments/{{shipment_id}}/fail",
              "host": ["{{base_url}}"],
              "path": ["shipper", "shipments", "{{shipment_id}}", "fail"]
            }
          }
        },
        {
          "name": "Upload Proof",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "proofImage",
                  "type": "file",
                  "src": ""
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/shipper/shipments/{{shipment_id}}/upload-proof",
              "host": ["{{base_url}}"],
              "path": ["shipper", "shipments", "{{shipment_id}}", "upload-proof"]
            }
          }
        },
        {
          "name": "Update Location",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              },
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "latitude",
                  "value": "10.762622"
                },
                {
                  "key": "longitude",
                  "value": "106.660172"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/shipper/location/update",
              "host": ["{{base_url}}"],
              "path": ["shipper", "location", "update"]
            }
          }
        }
      ]
    },
    {
      "name": "Tracking",
      "item": [
        {
          "name": "Get Tracking by Shipment",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/tracking/shipment/{{shipment_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "tracking", "shipment", "{{shipment_id}}"]
            }
          }
        },
        {
          "name": "Update Tracking",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              },
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "shipmentId",
                  "value": "{{shipment_id}}"
                },
                {
                  "key": "latitude",
                  "value": "10.762622"
                },
                {
                  "key": "longitude",
                  "value": "106.660172"
                },
                {
                  "key": "description",
                  "value": "On the way"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/api/tracking/update",
              "host": ["{{base_url}}"],
              "path": ["api", "tracking", "update"]
            }
          }
        }
      ]
    },
    {
      "name": "Notifications",
      "item": [
        {
          "name": "Get Warehouse Notifications",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/warehouse/notifications",
              "host": ["{{base_url}}"],
              "path": ["warehouse", "notifications"]
            }
          }
        },
        {
          "name": "Get Shipper Notifications",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/shipper/notifications",
              "host": ["{{base_url}}"],
              "path": ["shipper", "notifications"]
            }
          }
        },
        {
          "name": "Get Notifications by Recipient",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/notifications/{{recipient_type}}/{{recipient_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "notifications", "{{recipient_type}}", "{{recipient_id}}"]
            }
          }
        },
        {
          "name": "Get Unread Notifications",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/notifications/{{recipient_type}}/{{recipient_id}}/unread",
              "host": ["{{base_url}}"],
              "path": ["api", "notifications", "{{recipient_type}}", "{{recipient_id}}", "unread"]
            }
          }
        },
        {
          "name": "Get Unread Count",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/notifications/{{recipient_type}}/{{recipient_id}}/count",
              "host": ["{{base_url}}"],
              "path": ["api", "notifications", "{{recipient_type}}", "{{recipient_id}}", "count"]
            }
          }
        },
        {
          "name": "Mark as Read",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/notifications/{{notification_id}}/read",
              "host": ["{{base_url}}"],
              "path": ["api", "notifications", "{{notification_id}}", "read"]
            }
          }
        },
        {
          "name": "Mark All as Read",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/notifications/{{recipient_type}}/{{recipient_id}}/read-all",
              "host": ["{{base_url}}"],
              "path": ["api", "notifications", "{{recipient_type}}", "{{recipient_id}}", "read-all"]
            }
          }
        },
        {
          "name": "Delete Notification",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Cookie",
                "value": "JSESSIONID={{JSESSIONID}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/notifications/{{notification_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "notifications", "{{notification_id}}"]
            }
          }
        }
      ]
    }
  ]
}